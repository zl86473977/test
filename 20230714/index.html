<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
		<script type="text/javascript" src="./FileSaver.js"></script>
	</head>
	<body>
		<canvas id="myCanvas" width="720" height="720"></canvas>
		<button onclick="handleClick()">下载</button>

		<script type="text/javascript">
			function handleClick() {
				//在canvas上绘制矩形
				const canvas = document.getElementById("myCanvas");
				const context = canvas.getContext("2d");
				const img = new Image();
				img.src = './test.jpg';
				
				// //确保图片被加载完成
				img.onload = function() {
					//使用drawImage绘制到画布上面
					console.log('this', this);
					context.drawImage(this, 0, 0, 720, 720);
					
					//将canvas内容保存为文件并下载
					canvas.toBlob(function(blob) {
						saveAs(blob, "test.png");
					});
				}
				
			}
		</script>
	</body>
</html>
